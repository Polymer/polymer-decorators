// This script generates global.d.ts, a transformation of the type declarations
// of the decorators module into the Polymer.decorators global namespace, which
// corresponds to what our rollup configuration does.
//
// This script should typically be run with `npm run build`.

const fs = require('fs');

const input = fs.readFileSync('lib/decorators.d.ts').toString();
const output = `// DO NOT EDIT
// This file is automatically generated by \`npm run build\`.

declare namespace Polymer {
  namespace decorators {
${
    input
        // We don't need to export or declare each member of the namespace.
        .replace(/^export\s+/gm, '')
        .replace(/^declare\s+/gm, '')
        // Indent functions 2 levels.
        .replace(/^/gm, '    ')}
  }
}
`
fs.writeFileSync('global.d.ts', output);
